<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<link href="/nav.css" rel="stylesheet" type="text/css">

<header>
	<div class="navbar">
		<!-- <div class="logo"><a href="/">BudgetBuddy</a></div> -->
		<div class="logo"><a href="/"><img src="/pictures/logo.png" alt="BudgetBuddy" style="width:100px;height:100px;"></a></div>



		<div class="inputBox_container">
			<svg onclick="searchRedirect()" class="search_icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" alt="search icon" >
				<path d="M46.599 46.599a4.498 4.498 0 0 1-6.363 0l-7.941-7.941C29.028 40.749 25.167 42 21 42 9.402 42 0 32.598 0 21S9.402 0 21 0s21 9.402 21 21c0 4.167-1.251 8.028-3.342 11.295l7.941 7.941a4.498 4.498 0 0 1 0 6.363zM21 6C12.717 6 6 12.714 6 21s6.717 15 15 15c8.286 0 15-6.714 15-15S29.286 6 21 6z">
				</path>
			</svg>
			<input class="inputBox" id="search-input" type="text" placeholder="Search For Products" onkeyup="searchProducts()">
			<ul id="search-results" class="dropdown-list"></ul>
		</div>
		



		<ul class="links">
			<li><a href="/">Home</a></li>
			<li><a href="/categories">Categories</a></li>
			<li><a href="/contact">Contact</a></li>
		</ul>

		<a href="/search" class="search-link">
			<div class="enh-search-container">
				<img class="enh_search" src="/pictures/magnif-glass.png" alt="Enhanced Search">
				<span class="search-count" id="total-items-count"><%= session.compare.totalItems %></span>
			</div>

			<div class="jumping-icon hidden" id="jumping-arrow">
				<i class="fa-solid fa-up-long"></i>
			</div>
		</a>

		<!-- Dynamic Sign In/Sign Up or Profile Icon -->
		<% if (session.user) { %>
			<!-- User Logged In: Profile Icon -->
			<li class="dropdown">
				<button class="profile-btn">
					<i class="fa fa-user-circle" aria-hidden="true"></i>
				</button>
				<div class="dropdown-menu">
					<a href="/profile">My Profile</a>
					<a href="/orders">My Orders</a>
					<a href="/reviews">My Reviews</a>
					<form action="/login/logout" method="POST">
						<button type="submit" class="logout-btn">Logout</button>
					</form>
				</div>
			</li>
		<% } else { %>
			<!-- User Not Logged In: Sign In/Sign Up Buttons -->
			<li><a href="/login" class="nav-btn">Sign In</a></li>
		<% } %>

		<a href="/cart" class="action_btn">
			<i class="fa fa-shopping-cart" style="font-size: 20px; position: relative;"></i>
			<% if (session.cart && session.cart.totalQuantity > 0) { %>
				<span class="cart-count"><%= session.cart.totalQuantity %></span>
			<% } %>
		</a>
		<div class="toggle_btn"><i class="fa-solid fa-bars"></i></div>
	</div>

	<div class="dropdown_menu">
		<li><a href="/">Home</a></li>
		<li><a href="/categories">Categories</a></li>
		<li><a href="/contact">Contact</a></li>


		<li><a href="/cart" class="action_btn"><i class="fa fa-shopping-cart" style="font-size:16px"></i>
			<% if (session.cart && session.cart.totalQuantity > 0) { %>
				<span class="cart-count"><%= session.cart.totalQuantity %></span>
			<% } %>
		</a></li>
	</div>
</header>

<div id="toast-container" class="toast-container"></div>

<script type="text/javascript" src="/nav_search.js"></script>