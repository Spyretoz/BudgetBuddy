<html>
	<link href="/categories.css" rel="stylesheet" type="text/css">

	
	<%- include('./partials/header.ejs') %>
	<body>

		<%- include('./partials/nav.ejs') %>

		<br><br><br>
		<div class="categories-container" id="categories-container">
			<!-- Categories will be added here dynamically -->

			<section class="index-category">
				<p>Categories</p>

				<a href="" class="index-category-box">
					<div class="dark-overlay"></div>
					<h3>Electronics</h3>
				</a>
				<a href="" class="index-category-box">
					<div class="dark-overlay"></div>
					<h3>Cars & Moto</h3>
				</a>
				<a href="" class="index-category-box">
					<div class="dark-overlay"></div>
					<h3>Medical</h3>
				</a>
			</section>
		</div>

		<br><br><br>
		
		<script>
			// Fetch categories from the server and render them on the page
			async function fetchCategories() {
				try {
					const response = await fetch('/categories/all');
					const categories = await response.json();

					//console.log(categories);
		
					const categoriesContainer = document.getElementById('categories-container');
					
					// Render categories dynamically
					categories.forEach(category => {
						const categoryDiv = document.createElement('a');

						categoryDiv.href = window.location.href + "/" + `${category.categoryname}`;

						categoryDiv.classList.add('category');
						categoryDiv.innerHTML = `
							<div class="category-name">${category.categoryname}</div>
						`;
						categoriesContainer.appendChild(categoryDiv);
					});
				} catch (error) {
					console.error('Error fetching categories:', error);
				}
			}
		
			// Call the function to fetch and display categories when the page loads
			fetchCategories();
		</script>

	   
		<%- include('./partials/footer.ejs') %>
	
	</body>

</html>
